<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Reset Password â€“ Portrait Intelligence Lab</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>

<div class="auth-page">
  <div class="auth-card">
    <h1>Reset Password</h1>
    <p class="subtitle">Enter your email to receive a reset link</p>

    <div class="form-group">
      <label>Email</label>
      <input type="email" id="email" placeholder="you@example.com" />
    </div>

    <button class="btn btn-primary" onclick="sendReset()">Send Reset Link</button>

    <p id="msg" class="auth-error"></p>

    <div class="auth-footer">
      <a href="/auth/login.html">Back to login</a>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="/js/supabase.js"></script>
<script type="module">
import { ENV } from "/js/env.js";

async function sendReset() {
  const email = document.getElementById("email").value;
  const msg = document.getElementById("msg");

  if (!email) {
    msg.textContent = "Please enter your email";
    return;
  }

  const { error } = await supabase.auth.resetPasswordForEmail(email, {
    redirectTo: `${ENV.FRONTEND_ORIGIN}/auth/reset-password.html`
  });

  if (error) {
    msg.textContent = error.message;
    return;
  }

  msg.style.color = "green";
  msg.textContent = "Password reset link sent to your email";
}

window.sendReset = sendReset;
</script>




</body>
</html>
